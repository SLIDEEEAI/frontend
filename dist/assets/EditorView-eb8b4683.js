import{d as x,e,f as o,g as a,z,t as $,A as T,x as L,y as j,_ as P,p as A,c as g,o as B,F as b,m as k,n as E,h,i as y,b as N,B as w,w as R,C as H,v as F,r as M,D as U,l as I,j as W}from"./index-0c1004f1.js";import{A as q,p as D}from"./AppSlidePreview-d5d49bbd.js";const G="/assets/dot_frame-b5741d6a.svg",J="/assets/actionReturn-c8477fa1.svg",K="/assets/actionAhead-5e12be80.svg",O="/assets/field_text-7dc419bd.svg",Q="/assets/field_img-9c2822b9.svg",X="/assets/field_graphic-ded9a0d6.svg",Y="/assets/field_figure-32dbfb40.svg",Z="/assets/field_table-8be388b7.svg",ee="/assets/field_style-735d6d8b.svg",te="/assets/field_slide-983f0ff5.svg",se="/assets/Chat-c970f177.svg",ae="/assets/tab_arrow-850ec5d7.svg",oe="/assets/play_arrow-bab9bda8.svg",de=d=>(L("data-v-7ed3d1ff"),d=d(),j(),d),ie={class:"header_container"},ne={class:"header-left"},le=de(()=>a("img",{src:G,alt:""},null,-1)),re={class:"project-name"},ce=T('<div class="header-tools-panel" data-v-7ed3d1ff><button class="tool-btn" data-v-7ed3d1ff><img src="'+J+'" alt="" data-v-7ed3d1ff></button><button class="tool-btn" data-v-7ed3d1ff><img src="'+K+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+O+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+Q+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+X+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+Y+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+Z+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+ee+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+te+'" alt="" data-v-7ed3d1ff></button><div class="splitter" data-v-7ed3d1ff></div><button class="tool-btn" data-v-7ed3d1ff><img src="'+se+'" alt="" data-v-7ed3d1ff></button></div><div class="header-right" data-v-7ed3d1ff><button class="share-btn transparent" data-v-7ed3d1ff> Поделиться <img src="'+ae+'" alt="" data-v-7ed3d1ff></button><button class="theme-gradient" id="play-prezentation-btn" data-v-7ed3d1ff> Play<img src="'+oe+'" alt="" data-v-7ed3d1ff></button><div class="user-avatar__wrap" data-v-7ed3d1ff></div></div>',2),_e=x({__name:"editorHeader",props:{presentationName:{}},setup(d){return(_,l)=>(e(),o("header",null,[a("div",ie,[a("div",ne,[a("img",{class:"return-btn",onClick:l[0]||(l[0]=f=>_.$router.go(-1)),src:z,alt:"",style:{cursor:"pointer"}}),le,a("span",re,$(_.presentationName),1)]),ce])]))}});const fe=P(_e,[["__scopeId","data-v-7ed3d1ff"]]),ve="/assets/magic-146e94ca.svg";const pe={},ue={id:"AI-button",class:"theme-gradient"},ge=a("img",{src:ve,alt:""},null,-1);function me(d,_){return e(),o("button",ue,[A(" /AI"),ge])}const be=P(pe,[["render",me]]),ye="/assets/plus-d9355d6e.svg",V=d=>(L("data-v-1b247fb0"),d=d(),j(),d),he={class:"slides-loop"},Se=["onClick"],we={class:"slide-item__number"},$e={class:"slide-item__preview"},ke=V(()=>a("hr",{class:"slides-loop__splitter"},null,-1)),xe=V(()=>a("button",{class:"w-100 transparent",id:"add-new-slide__btn"},[a("img",{src:ye,alt:""})],-1)),Pe=x({__name:"editorSlidesLoop",props:{presentationStyle:{},slidePreviews:{}},emits:["toggleActiveSlide"],setup(d,{emit:_}){const l=g(),f=g(null),i=_;function t(r){const c=document.querySelectorAll(".slide-item");c.forEach(n=>{n.classList.remove("active")}),c[r].classList.add("active"),i("toggleActiveSlide",r)}return B(()=>{l.value&&(f.value=l.value.offsetWidth/1920)}),(r,c)=>(e(),o("div",he,[a("div",{class:"slides-loop__wrap",ref_key:"slidesLoopRef",ref:l},[(e(!0),o(b,null,k(r.slidePreviews,(n,v)=>(e(),o("div",{class:E(["slide-item",{active:v==0}]),onClick:m=>t(v),key:v},[a("div",we,$(v+1),1),a("div",$e,[A($(n.title)+" ",1),f.value&&r.presentationStyle&&n?(e(),h(q,{key:0,"scale-coefficient":f.value,slide:n,"preview-style":r.presentationStyle,onMount:c[0]||(c[0]=m=>console.log("Привет"))},null,8,["scale-coefficient","slide","preview-style"])):y("",!0)])],10,Se))),128))],512),ke,xe]))}});const Ce=P(Pe,[["__scopeId","data-v-1b247fb0"]]),Ae=x({__name:"editorSlidePage",props:{presentationStyle:{},slide:{},scaleCoefficient:{}},setup(d){const{resizeStyleByCoefficient:_,parseTextBoxesStyles:l,parsePicturesStyles:f}=N(),i=d,t=w(()=>l(i.slide.text_boxes,i.scaleCoefficient)),r=w(()=>f(i.slide.pictures,i.scaleCoefficient)),c=s=>t.value[s],n=s=>r.value[s],v=g(null),m=w(()=>_(i.presentationStyle,i.scaleCoefficient)),S=g(!1);return B(()=>{S.value=!0}),(s,C)=>(e(),o("div",{class:"slide-page",style:H(m.value),id:"slide-page",ref_key:"slidePage",ref:v},[S.value?(e(),o(b,{key:0},[(e(!0),o(b,null,k(s.slide.text_boxes,(p,u)=>(e(),h(p,{key:u,"box-style":c(u)},{default:R(()=>[A($(p.text),1)]),_:2},1032,["box-style"]))),128)),(e(!0),o(b,null,k(s.slide.pictures,(p,u)=>(e(),h(D,{key:u,"box-style":n(u),url:"https://slideeeeeee.ru"+p.url},null,8,["box-style","url"]))),128))],64)):y("",!0)],4))}});const Be=P(Ae,[["__scopeId","data-v-f5d7d78e"]]),Ie={class:"editor-page"},Le={class:"editor-workspace"},je={class:"editor-container"},Ne={key:0},Ve={class:"slide-view"},ze={key:0},Re=x({__name:"EditorView",setup(d){const _=N(),{getProjectById:l,parsePresentationStyles:f}=_,i=F.currentRoute.value.params.id.toString(),t=M({presentation:null,loading:!1,error:null}),r=w(()=>{var s;return(s=t.presentation)!=null&&s.title?t.presentation.title:"Untitled"}),c=g({}),n=g(),v=g(0),m=g(1);async function S(){t.loading=!0;try{console.log("id: "+i);const s=await l(i);s&&(t.presentation=s.json,c.value=f(s.json))}catch(s){t.error=s.message||"Неизвестная ошибка"}finally{t.loading=!1}}return U(()=>{}),B(async()=>{S(),n.value&&(m.value=n.value.offsetWidth/1920)}),(s,C)=>(e(),o("div",Ie,[I(fe,{"presentation-name":r.value},null,8,["presentation-name"]),a("div",Le,[a("div",je,[t.loading?(e(),o("div",Ne,"Loading")):t.presentation?(e(),h(Ce,{key:1,"presentation-style":c.value,"slide-previews":t.presentation.slides,onToggleActiveSlide:C[0]||(C[0]=p=>v.value=p)},null,8,["presentation-style","slide-previews"])):y("",!0),a("div",Ve,[a("div",{class:"slide-view__container",style:{"max-width":"1440px"},ref_key:"slidePageContainer",ref:n},[t.loading?(e(),o("div",ze,"Loading")):t.presentation?(e(!0),o(b,{key:1},k(t.presentation.slides,(p,u)=>(e(),o(b,{key:u},[u==v.value&&p?(e(),h(Be,{key:0,"presentation-style":W(f)(t.presentation),slide:p,"scale-coefficient":m.value},null,8,["presentation-style","slide","scale-coefficient"])):y("",!0)],64))),128)):y("",!0)],512)])])]),I(be)]))}});export{Re as default};
